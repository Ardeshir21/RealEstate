{% extends "FAbaseApp/base.html" %}
{% load static %}
{% load humanize %}

{% block head_description %}
  <!-- Specific Description for each page -->
  <meta name="description" content="ترندیول یا Trendyol یک فروشگاه آنلاین لباس در کشور ترکیه است. عرضه اجناس با کیفیت بالا و با قیمتی مناسب برای فروش آنلاین پوشاک و لوازم آرایشی از تمام برندهای خارجی. خرید و ارسال پوشاک و لوازم آرایش از ترکیه به ایران. ">
{% endblock head_description %}

{% block head_title %}
<!-- Title  -->
<title>خرید کالا از ترکیه</title>
{% endblock head_title %}

{% block head %}
<!-- Style CSS -->
<link rel="stylesheet" href="{% static "scrapeApp/css/custome.css" %}">
<!-- Css Styles for these template (page) -->
<link rel="stylesheet" href="{% static "FAbaseApp/css/detailView/Azenta-style.css" %}" type="text/css">
<link rel="stylesheet" href="{% static "baseApp/css/izmir.min.css" %}" type="text/css">
{% endblock head %}



<!-- The main content of the page -->
{% block body_content %}

    <!-- ajax loader -->
    <div id='ajax_container'>
      <div class='ajax_loader'>
        <div class='ajax_loader--dot'></div>
        <div class='ajax_loader--dot'></div>
        <div class='ajax_loader--dot'></div>
        <div class='ajax_loader--dot'></div>
        <div class='ajax_loader--dot'></div>
        <div class='ajax_loader--dot'></div>
        <div class='ajax_loader--text'></div>
      </div>
    </div>

    <!-- ##### WideImage Area Start ##### -->
    {% include "FAbaseApp/includes/wideImage.html" %}

    <!-- Brands -->
    <!-- Title -->
    <div class="container storesection-padding-50">
        <div class="row justify-content-md-center">
            <div class="col-12 text-center store-home-title">
                <h3>برند های پر فروش</h3>
            </div>
        </div>
    </div>
    <section class="presentation">
      {% for brand in featured_brands %}
        <div class="article">
            <a href="#" target="_self">
                <figure class="black">
                    <img src="{{brand.image.url}}" alt="خرید اینترنتی محصولات {{brand.name}}">
                </figure>
            </a>
        </div>
      {% endfor %}
    </section>


    <!-- Product Categories -->
    <section class="storesection-padding-50">
        <div class="category-page-container">

            <div id="grid">
              <!-- Women -->
              <a href="#">
                <div class="grid-item">
                  <figure class="c4-izmir c4-border-right c4-image-zoom-in c4-gradient-top" tabindex="0" style="--primary-color: #000046; --secondary-color: #1CB5E0; --text-color: #fdeff9; --border-color: #fdeff9;">
                    <img src="{{slideContent.image.url}}" alt="Sample Image">
                    <figcaption class="c4-layout-top-right">
                        <div class="c4-reveal-left text-margin-right-10">
                          <h2>
                            لباس زنانه
                          </h2>
                        </div>
                        <div class="c4-reveal-left c4-delay-200 text-margin-right-10">
                          <p>
                            تیشرت
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            شلوار جین
                          </p>
                        </div>
                    </figcaption>
                  </figure>
                </div>
              </a>
              <!-- Cosmetics -->
              <a href="#">
                <div class="grid-item grid-item-size2">
                  <figure class="c4-izmir c4-border-right c4-image-zoom-in c4-gradient-top" tabindex="0" style="--primary-color: #46002e; --secondary-color: #e01c88; --text-color: #fdeff9; --border-color: #fdeff9;">
                    <img src="{% static "scrapeApp/images/cosmetics.jpg" %}" alt="Cosmetics">
                    <figcaption class="c4-layout-top-right">
                        <div class="c4-reveal-left text-margin-right-10">
                          <h2>
                            لوازم آرایشی و بهداشتی
                          </h2>
                        </div>
                        <div class="c4-reveal-left c4-delay-200 text-margin-right-10">
                          <p>
                            پوست و مو
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            اکسسوری
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            عطر
                          </p>
                        </div>
                    </figcaption>
                  </figure>
                </div>
              </a>
              <!-- Kids -->
              <a href="#">
                <div class="grid-item grid-item-size2">
                  <figure class="c4-izmir c4-border-right c4-image-zoom-in c4-gradient-top" tabindex="0" style="--primary-color: #0c7001; --secondary-color: #5fdb51; --text-color: #fdeff9; --border-color: #fdeff9;">
                    <img src="{% static "scrapeApp/images/kids.jpg" %}" alt="Kids Clothes">
                    <figcaption class="c4-layout-top-right">
                        <div class="c4-reveal-left text-margin-right-10">
                          <h2>
                            لباس بچه گانه
                          </h2>
                        </div>
                        <div class="c4-reveal-left c4-delay-200 text-margin-right-10">
                          <p>
                            تی‌شرت و پیراهن
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            شلوار
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            لباس نوزادی
                          </p>
                        </div>
                    </figcaption>
                  </figure>
                </div>
              </a>
              <!-- Shoes and Bags -->
              <a href="#">
                <div class="grid-item grid-item-size2">
                  <figure class="c4-izmir c4-border-right c4-image-zoom-in c4-gradient-top" tabindex="0" style="--primary-color: #000046; --secondary-color: #1CB5E0; --text-color: #fdeff9; --border-color: #fdeff9;">
                    <img src="{% static "scrapeApp/images/bags.jpg" %}" alt="Kids Clothes">
                    <figcaption class="c4-layout-top-right">
                        <div class="c4-reveal-left text-margin-right-10">
                          <h2>
                            کیف
                          </h2>
                        </div>
                        <div class="c4-reveal-left c4-delay-200 text-margin-right-10">
                          <p>
                            کیف دستی
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            کوله
                          </p>
                        </div>
                    </figcaption>
                  </figure>
                </div>
              </a>
              <!-- Men -->
              <a href="#">
                <div class="grid-item">
                  <figure class="c4-izmir c4-border-right c4-image-zoom-in c4-gradient-top" tabindex="0" style="--primary-color: #000046; --secondary-color: #1CB5E0; --text-color: #fdeff9; --border-color: #fdeff9;">
                    <img src="{{slideContent.image.url}}" alt="Sample Image">
                    <figcaption class="c4-layout-top-right">
                        <div class="c4-reveal-left text-margin-right-10">
                          <h2>
                            لباس های مردانه
                          </h2>
                        </div>
                        <div class="c4-reveal-left c4-delay-200 text-margin-right-10">
                          <p>
                            تیشرت
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            شلوار جین
                          </p>
                        </div>
                    </figcaption>
                  </figure>
                </div>
              </a>
              <!-- Home appliances -->
              <a href="#">
                <div class="grid-item grid-item-size2">
                  <figure class="c4-izmir c4-border-right c4-image-zoom-in c4-gradient-top" tabindex="0" style="--primary-color: #000046; --secondary-color: #1CB5E0; --text-color: #fdeff9; --border-color: #fdeff9;">
                    <img src="{% static "scrapeApp/images/shoes.jpg" %}" alt="Kids Clothes">
                    <figcaption class="c4-layout-top-right">
                        <div class="c4-reveal-left text-margin-right-10">
                          <h2>
                            کفش
                          </h2>
                        </div>
                        <div class="c4-reveal-left c4-delay-200 text-margin-right-10">
                          <p>
                            اسپورت
                          </p>
                        </div>
                        <div class="c4-reveal-left c4-delay-300 text-margin-right-10">
                          <p>
                            مجلسی
                          </p>
                        </div>
                    </figcaption>
                  </figure>
                </div>
              </a>
            </div>
        </div>
    </section>

    <!-- Stores List -->
    <!-- Title -->
    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-12 text-center store-home-title">
                <h3>فروشگاه ها</h3>
            </div>
        </div>
    </div>
    <section class=" storesection-padding-50">
        <div class="container">
            <div class="row">
              {% for store in stores %}
                <div class="col-6 col-lg-3 store">
                  <a class="no-hover" href="{% url "scrapeApp:store_page" store=store.slug %}">
                    <div class="store-name text-center">
                        <h2>{{store.name}}</h2>
                    </div>
                    <img src="{{store.logo.url}}" alt="">
                  </a>
                </div>
              {% endfor %}
            </div>
        </div>
    </section>

    <!-- Link Scraper -->
    <!-- Title -->
    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-12 text-center store-home-title">
                <h3>استعلام قیمت</h3>
            </div>
        </div>
    </div>
    <section id="LinkFrom" class="south-contact-area section-padding-50">
        <div class="container">
            <div class="row">
                <div class="col-12">
                  <div class="contact-form text-center">
                    <form id="url-form" class='form-group' method="POST">
                      <input id='requested_url' class='form-control' style="text-align: center;" type="text" placeholder="لینک محصول مورد نظر" value="">
                      <button id="submit-form" class='btn south-btn wow fadeInUp' data-wow-duration="1s" data-wow-delay="300ms" url="{% url "scrapeApp:link_scraper" %}" type="submit">محاسبه قیمت</button>
                    </form>
                  </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Scrape Result -->
    <section id="Quotation" class="south-contact-area section-padding-50">
        <div id='result-part' class="container">
          <!-- The content of this div is loaded via AJAX from scrape_result.html -->
        </div>
    </section>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

{% endblock body_content %}

{% block body_JS %}
<script src="{% static "baseApp/js/packery.pkgd.min.js" %}"></script>

<script type="text/javascript">
  $('#grid').packery({
    // percentPosition: true,
    itemSelector: '.grid-item',
    // originLeft: true,
    gutter: 10,
  })

</script>




<!-- Scroll to AJAX section -->
<script type="text/javascript">
  // Auto Scroller
  var EPPZScrollTo =
  {
      /**
       * Helpers.
       */
      documentVerticalScrollPosition: function()
      {
          if (self.pageYOffset) return self.pageYOffset; // Firefox, Chrome, Opera, Safari.
          if (document.documentElement && document.documentElement.scrollTop) return document.documentElement.scrollTop; // Internet Explorer 6 (standards mode).
          if (document.body.scrollTop) return document.body.scrollTop; // Internet Explorer 6, 7 and 8.
          return 0; // None of the above.
      },

      viewportHeight: function()
      { return (document.compatMode === "CSS1Compat") ? document.documentElement.clientHeight : document.body.clientHeight; },

      documentHeight: function()
      { return (document.height !== undefined) ? document.height : document.body.offsetHeight; },

      documentMaximumScrollPosition: function()
      { return this.documentHeight() - this.viewportHeight(); },

      elementVerticalClientPositionById: function(id)
      {
          var element = document.getElementById(id);
          var rectangle = element.getBoundingClientRect();
          return rectangle.top;
      },

      /**
       * Animation tick.
       */
      scrollVerticalTickToPosition: function(currentPosition, targetPosition)
      {
          var filter = 0.2;
          var fps = 40;
          var difference = parseFloat(targetPosition) - parseFloat(currentPosition);

          // Snap, then stop if arrived.
          var arrived = (Math.abs(difference) <= 0.5);
          if (arrived)
          {
              // Apply target.
              scrollTo(0.0, targetPosition);
              return;
          }

          // Filtered position.
          currentPosition = (parseFloat(currentPosition) * (1.0 - filter)) + (parseFloat(targetPosition) * filter);

          // Apply target.
          scrollTo(0.0, Math.round(currentPosition));

          // Schedule next tick.
          setTimeout("EPPZScrollTo.scrollVerticalTickToPosition("+currentPosition+", "+targetPosition+")", (1000 / fps));
      },

      /**
       * For public use.
       *
       * @param id The id of the element to scroll to.
       * @param padding Top padding to apply above element.
       */
      scrollVerticalToElementById: function(id, padding)
      {
          var element = document.getElementById(id);
          if (element == null)
          {
              console.warn('Cannot find element with id \''+id+'\'.');
              return;
          }

          var targetPosition = this.documentVerticalScrollPosition() + this.elementVerticalClientPositionById(id) - padding;
          var currentPosition = this.documentVerticalScrollPosition();

          // Clamp.
          var maximumScrollPosition = this.documentMaximumScrollPosition();
          if (targetPosition > maximumScrollPosition) targetPosition = maximumScrollPosition;

          // Start animation.
          this.scrollVerticalTickToPosition(currentPosition, targetPosition);
      }
  };
</script>

<!-- AJAX -->
<script type="text/javascript">
     // The URL ajax
     // loader hide
    $('#ajax_container').hide();

    $('#url-form').on('submit', function(e){
      var requested_url= $('#requested_url').val();
      var ajax_call= $('#submit-form').attr('url');
      e.preventDefault();

      $.ajax({
          type:"GET",
          url: ajax_call,
          data: {
            'requested_url': requested_url,
            'csrfmiddlewaretoken': '{{ csrf_token }}',
          },
          beforeSend: function() {
             $('#ajax_container').show();
          },
          success: function(data){
            // console.log(data)
            $('#ajax_container').hide();
            $('#result-part').html(data);
            EPPZScrollTo.scrollVerticalToElementById('Quotation', 45);
            }
       });
    });
</script>


{% endblock body_JS %}
